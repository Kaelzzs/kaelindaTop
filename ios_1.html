<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  iOS - kaelinda
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="kaelinda" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:kaelinda.top ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">最近更新</a></li>
        
        <li id=""><a target="_self" href="archives.html">归档目录</a></li>
        
        <li id="ios.css"><a target="_self" href="ios.html">iOS</a></li>
        
        <li id="swift.css"><a target="_self" href="swift.html">Swift</a></li>
        
        <li id="reactnative.css"><a target="_self" href="reactnative.html">RN</a></li>
        
        <li id="js.css"><a target="_self" href="js.html">JS</a></li>
        
        <li id="shell.css"><a target="_self" href="shell.html">shell</a></li>
        
        <li id="coding.css"><a target="_self" href="coding.html">编程</a></li>
        
        <li id="live.css"><a target="_self" href="live.html">随笔</a></li>
        
        <li id="app.css"><a target="_blank" href="app.html">APP推荐</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; kaelinda</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">最近更新</a></li>
        
        <li><a target="_self" href="archives.html">归档目录</a></li>
        
        <li><a target="_self" href="ios.html">iOS</a></li>
        
        <li><a target="_self" href="swift.html">Swift</a></li>
        
        <li><a target="_self" href="reactnative.html">RN</a></li>
        
        <li><a target="_self" href="js.html">JS</a></li>
        
        <li><a target="_self" href="shell.html">shell</a></li>
        
        <li><a target="_self" href="coding.html">编程</a></li>
        
        <li><a target="_self" href="live.html">随笔</a></li>
        
        <li><a target="_blank" href="app.html">APP推荐</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="reactnative.html">React-Native</a></li>
        
            <li><a href="ios.html">iOS</a></li>
        
            <li><a href="app.html">MacAPP</a></li>
        
            <li><a href="swift.html">Swift</a></li>
        
            <li><a href="js.html">JavaScript</a></li>
        
            <li><a href="vue.html">Vue</a></li>
        
            <li><a href="shell.html">shell</a></li>
        
            <li><a href="%E7%BD%91%E7%BB%9C.html">网络</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15523077857608.html">
                
                  <h1>OC中枚举写法  以及 字符串枚举探索</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">常见枚举写法</h2>

<h3 id="toc_1">C语言模式的枚举写法：enum</h3>

<pre><code class="language-text">typedef enum{
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
} KLType;
</code></pre>

<h3 id="toc_2">普通【整型】枚举写法 ：NS_ENUM</h3>

<pre><code class="language-text">typedef NS_ENUM(NSUInteger, KLType) {
    KLTypeRed = 1,
    KLTypeGreen = 2,
    KLTypeOrange = 3,
};
</code></pre>

<h3 id="toc_3">位移枚举 ：NS_OPTIONS</h3>

<pre><code class="language-text">typedef NS_OPTIONS(NSUInteger, KLType) {
    KLTypeRed = 1 &lt;&lt; 0,
    KLTypeGreen = 1 &lt;&lt; 1,
    KLTypeOrange = 1 &lt;&lt; 2,
};

</code></pre>


                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="15523077857608.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/3/11</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15729429393060.html">
                
                  <h1>Xcode 11 Xib `_UITextLayoutView` 崩溃</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>崩溃信息如下：</p>

<pre><code class="language-text">*** Terminating app due to uncaught exception 
&#39;NSInvalidUnarchiveOperationException&#39;, 
reason: &#39;Could not instantiate class named _UITextLayoutView because no class named _UITextLayoutView was found; 
the class needs to be defined in source code or linked in from a library (ensure the class is part of the correct target)&#39;
</code></pre>

<p>解决方案：</p>

<h2 id="toc_0">解决方案 一</h2>

<p>xib的部分视图改用硬核手写，以避坑。</p>

<h2 id="toc_1">解决方案 二</h2>

<p><a href="https://developer.apple.com/download/more">下载其他版本Xcode 传送门</a></p>

<h2 id="toc_2">解决方案 三</h2>

<p>OC 黑魔法 <code>Runtime</code>。</p>

<ul>
<li><p>创建 文件 <code>UITextViewWorkaround</code></p></li>
<li><p>UITextViewWorkaround.h</p></li>
</ul>

<pre><code class="language-text">#import &lt;Foundation/Foundation.h&gt;

@interface UITextViewWorkaround : NSObject
+ (void)executeWorkaround; 
@end

</code></pre>

<ul>
<li>UITextViewWorkaround.m</li>
</ul>

<pre><code class="language-text">#import &quot;UITextViewWorkaround.h&quot;
#import  &lt;objc/runtime.h&gt;



@implementation UITextViewWorkaround

+ (void)executeWorkaround {
    if (@available(iOS 13.2, *)) {

    }
    else {
        const char *className = &quot;_UITextLayoutView&quot;;
        Class cls = objc_getClass(className);
        if (cls == nil) {
            cls = objc_allocateClassPair([UIView class], className, 0);
            objc_registerClassPair(cls);
#if DEBUG
            printf(&quot;added %s dynamically\n&quot;, className);
#endif
        }
    }
}

@end
</code></pre>

<ul>
<li>使用该静态方法</li>
</ul>

<pre><code class="language-text">#import &quot;UITextViewWorkaround.h&quot;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after application launch.

    [UITextViewWorkaround executeWorkaround];
    return yes;
}
</code></pre>

<ul>
<li>swift 版本请客观收下：</li>
</ul>

<pre><code class="language-text">import UIKit

@objc
class UITextViewWorkaround : NSObject {

    static func executeWorkaround() {
        if #available(iOS 13.2, *) {
        } else {
            let className = &quot;_UITextLayoutView&quot;
            let theClass = objc_getClass(className)
            if theClass == nil {
                let classPair: AnyClass? = objc_allocateClassPair(UIView.self, className, 0)
                objc_registerClassPair(classPair!)
            }
        }
    }

}
</code></pre>

<p><a href="https://stackoverflow.com/questions/58657087/after-upgrading-to-xcode-11-2-from-xcode-11-1-app-crashes-due-to-uitextlayoutv">参考</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/11/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15565436191697.html">
                
                  <h1>【进阶】iOS自定义ViewController转场动画</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">遵守协议 <code>&lt;UIViewControllerAnimatedTransitioning&gt;</code>的动画转场管理对象</h2>

<ul>
<li>API</li>
</ul>

<pre><code class="language-text">// 自定义动画时长
- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
    return 0.4;
}
// 自定义动画过程
- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
}
</code></pre>

<ul>
<li>实现</li>
</ul>

<pre><code class="language-text">- (NSTimeInterval)transitionDuration:(nullable id &lt;UIViewControllerContextTransitioning&gt;)transitionContext{
    return 0.3;
}
//所有的过渡动画事务都在这个方法里面完成
- (void)animateTransition:(id &lt;UIViewControllerContextTransitioning&gt;)transitionContext{

 //取出转场前后的视图控制器
  UIViewController * fromVC = (UIViewController *)[transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];
  UIViewController * toVC = (UIViewController *)[transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];

 //取出转场前后视图控制器上的视图view
    UIView * toView = [transitionContext viewForKey:UITransitionContextToViewKey];
    UIView * fromView = [transitionContext viewForKey:UITransitionContextFromViewKey];

 //这里有个重要的概念containerView，要做转场动画的视图就必须要加入containerView上才能进行，可以理解containerView管理着所有做转场动画的视图
    UIView *containerView = [transitionContext containerView];

  //如果加入了手势交互转场，就需要根据手势交互动作是否完成/取消来做操作，完成标记YES，取消标记NO，必须标记，否则系统认为还处于动画过程中，会出现无法交互之类的bug
   [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
     if ([transitionContext transitionWasCancelled]) { 
    //如果取消转场
          }else{
   //完成转场
     }
}
</code></pre>

<h2 id="toc_1">继承父类<code>UIPercentDrivenInteractiveTransition</code>的交互动画管理对象</h2>

<ul>
<li>API</li>
</ul>

<pre><code class="language-text">//必要调用实现的系统方法
//手势过程中，通过updateInteractiveTransition设置转场过程动画进行的百分比，然后系统会根据百分比自动布局动画控件，不用我们控制了
 [self updateInteractiveTransition:percentComplete];
//完成转场操作
 [self finishInteractiveTransition];
//取消转场操作
 [self cancelInteractiveTransition];
</code></pre>

<h2 id="toc_2">遵守<code>&lt;UIViewControllerTransitioningDelegate&gt;</code>的视图控制器转场动画管理对象</h2>

<pre><code class="language-text">-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source{
    return self.pushAnimator;
}

-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed{
    return self.popAnimator;
}

#pragma mark ------- 手势交互添加

- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{
    
    return nil;//返回继承父类`UIPercentDrivenInteractiveTransition`的交互动画管理对象
}

- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{
        return nil;//返回继承父类`UIPercentDrivenInteractiveTransition`的交互动画管理对象
}
</code></pre>

<h2 id="toc_3">使用步骤</h2>

<ul>
<li><p>设置代理</p>
<ul>
<li><p>push</p>
<p><code>self.navigationController.delegate = self.animatedTransition;</code></p></li>
<li><p>present</p>
<p><code>toViewController.transitioningDelegate = self.browserAnimation;</code></p></li>
</ul></li>
<li><p>分别设置 push POP 是哪个动画对象</p>
<pre><code class="language-text">-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source{
    return self.pushAnimator;<br/>
}<br/>
-(id&lt;UIViewControllerAnimatedTransitioning&gt;)animationControllerForDismissedController:(UIViewController *)dismissed{<br/>
    return self.popAnimator;<br/>
}<br/>
- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForPresentation:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{<br/>
    return nil;<br/>
}<br/>
- (nullable id &lt;UIViewControllerInteractiveTransitioning&gt;)interactionControllerForDismissal:(id &lt;UIViewControllerAnimatedTransitioning&gt;)animator{<br/>
        return nil;<br/>
}<br/>
// ---------- push 还可以这么去分配动画对象<br/>
-(id&lt;UIViewControllerAnimatedTransitioning&gt;)navigationController:(UINavigationController *)navigationController animationControllerForOperation:(UINavigationControllerOperation)operation fromViewController:(UIViewController *)fromVC toViewController:(UIViewController *)toVC{<br/>
if (operation == UINavigationControllerOperationPush) {<br/>
    return self.pushAniamtor;<br/>
}else if (operation == UINavigationControllerOperationPop){<br/>
    return self.popAnimator;<br/>
}<br/>
return nil;<br/>
}
</code></pre></li>
<li><p>动画对象内 设置 动画时长 和 动画实现</p>
<pre><code class="language-text">- (NSTimeInterval)transitionDuration:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{
return 0.4;<br/>
}<br/>
- (void)animateTransition:(id&lt;UIViewControllerContextTransitioning&gt;)transitionContext{<br/>
}
</code></pre></li>
</ul>

<h2 id="toc_4">坑点</h2>

<ul>
<li>    <code>.modalPresentationStyle = UIModalPresentationCustom;</code>modalPresentationStyle这个属性会影响present出来的VC的横竖屏（横屏变竖屏）</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/4/29</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15562035528015.html">
                
                  <h1>iOS 之 源码阅读 【Aspects】</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><strong>关键词</strong></p>

<ul>
<li>Runtime</li>
<li>AOP(面向协议编程)</li>
<li>Hook</li>
</ul>

<h2 id="toc_0">基本用法</h2>

<pre><code class="language-text">[KLBaseViewController aspect_hookSelector:@selector(logSomethings) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo)
     {
         NSLog(@&quot;%@ 对象的viewDidLoad调用了&quot;,aspectInfo.instance);
         
         [self doSomethings:aspectInfo.instance];
     } error:NULL];
</code></pre>

<h2 id="toc_1">主要API</h2>

<pre><code class="language-text">#pragma mark - Public Aspects API
+ (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error {
    return aspect_add((id)self, selector, options, block, error);
}

/// @return A token which allows to later deregister the aspect.
- (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error {
    return aspect_add(self, selector, options, block, error);
}
</code></pre>

<h2 id="toc_2">源码解析</h2>

<h3 id="toc_3">AspectOptions</h3>

<pre><code class="language-text">typedef NS_OPTIONS(NSUInteger, AspectOptions) {
    AspectPositionAfter   = 0,            /// hook的方法执行之后执行
    AspectPositionInstead = 1,            /// 完全替代之前的方法
    AspectPositionBefore  = 2,            /// hook的方法执行之前执行
    AspectOptionAutomaticRemoval = 1 &lt;&lt; 3 /// 执行之后移除
};
</code></pre>

<h3 id="toc_4">AspectToken</h3>

<pre><code class="language-text">@protocol AspectToken &lt;NSObject&gt;

- (BOOL)remove;

@end
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/4/25</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15659429705338.html">
                
                  <h1>iOS 之 APP安全</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">检测设备是否越狱</h2>

<pre><code class="language-text">+ (BOOL)isJailBreak {
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Applications/Cydia.app&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/Library/MobileSubstrate/MobileSubstrate.dylib&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/bin/bash&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/usr/sbin/sshd&quot;]){
        return YES;
    }
    
    if ([[NSFileManager defaultManager] fileExistsAtPath:@&quot;/etc/apt&quot;]){
        return YES;
    }
    if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;cydia://&quot;]]) {
        return YES;
    }
    return NO;
}
</code></pre>

<h2 id="toc_1">检测设备网络环境是否开启代理</h2>

<pre><code class="language-text">NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings());
NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef _Nonnull)([NSURL URLWithString:@&quot;https://www.baidu.com&quot;]), (__bridge CFDictionaryRef _Nonnull)(proxySettings)));

NSLog(@&quot;\n%@&quot;,proxies);
NSDictionary *settings = proxies[0];
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyHostNameKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyPortNumberKey]);
NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyTypeKey]);
    if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;])
    {
        NSLog(@&quot;kael 没代理&quot;);
    }
                                                                                                     else
    {
        NSLog(@&quot;kael 设置了代理&quot;);
    }
</code></pre>

<h2 id="toc_2">APP 禁止动态调试</h2>

<pre><code class="language-text">#import &lt;UIKit/UIKit.h&gt; 
#import &quot;AppDelegate.h&quot;  
#import &lt;dlfcn.h&gt;

typedef int (*ptrace_ptr_t)(int _request, pid_t _pid, caddr_t _addr, int _data);
#if !defined(PT_DENY_ATTACH)
#define PT_DENY_ATTACH 31
#endif  // !defined(PT_DENY_ATTACH)

void disable_gdb() {
  void* handle = dlopen(0, RTLD_GLOBAL | RTLD_NOW);
  ptrace_ptr_t ptrace_ptr = dlsym(handle, &quot;ptrace&quot;);
  ptrace_ptr(PT_DENY_ATTACH, 0, 0, 0);
  dlclose(handle);
}

int main(int argc, char * argv[]) {
#ifndef DEBUG
    disable_gdb();
#endif
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
</code></pre>

<p>如果你在Xcode调试环境下，去掉#ifndef DEBUG #endif这句话，你会发现，Xcode无法调试该应用；因为动态的加载了ptrace，然后给传输的宏是PT_DENY_ATTACH 拒绝附加进程</p>

<h2 id="toc_3">代码混淆 脚本</h2>

<p><a href="https://zfj1128.blog.csdn.net/article/details/95482006">代码混淆相关 参考文章</a></p>

<pre><code class="language-text">TABLENAME=symbols
SYMBOL_DB_FILE=&quot;$PROJECT_DIR/CodeObfuscation/symbols&quot;
STRING_SYMBOL_FILE=&quot;$PROJECT_DIR/CodeObfuscation/func.list&quot;
HEAD_FILE=&quot;$PROJECT_DIR/CodeObfuscation/codeObfuscation.h&quot;
export LC_CTYPE=C

#维护数据库方便日后作排重
createTable()
{
echo &quot;create table $TABLENAME(src text, des text);&quot; | sqlite3 $SYMBOL_DB_FILE
}

insertValue()
{
echo &quot;insert into $TABLENAME values(&#39;$1&#39; ,&#39;$2&#39;);&quot; | sqlite3 $SYMBOL_DB_FILE
}

query()
{
echo &quot;select * from $TABLENAME where src=&#39;$1&#39;;&quot; | sqlite3 $SYMBOL_DB_FILE
}

ramdomString()
{
openssl rand -base64 64 | tr -cd &#39;a-zA-Z&#39; |head -c 16
}

rm -f $SYMBOL_DB_FILE
rm -f $HEAD_FILE
createTable

touch $HEAD_FILE
echo &#39;#ifndef Demo_codeObfuscation_h
#define Demo_codeObfuscation_h&#39; &gt;&gt; $HEAD_FILE
echo &quot;//confuse string at `date`&quot; &gt;&gt; $HEAD_FILE
cat &quot;$STRING_SYMBOL_FILE&quot; | while read -ra line; do
if [[ ! -z &quot;$line&quot; ]]; then
ramdom=`ramdomString`
echo $line $ramdom
insertValue $line $ramdom
echo &quot;#define $line $ramdom&quot; &gt;&gt; $HEAD_FILE
fi
done
echo &quot;#endif&quot; &gt;&gt; $HEAD_FILE


sqlite3 $SYMBOL_DB_FILE .dump
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/8/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15680242190062.html">
                
                  <h1>iOS13适配注意事项</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>技术参考：</p>

<p><a href="https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/">apple login</a></p>

<p><a href="https://www.jianshu.com/p/46cd57b98b0d">IOS13适配-详细</a></p>

<p><a href="https://www.jianshu.com/p/373a8fb3b345">iOS 13 适配(持续更新中)</a></p>

<p><a href="https://www.jianshu.com/p/4654f8f6e16e">iOS13适配</a></p>

<p><a href="https://juejin.im/post/5d745f8af265da03b5746fa0">掘金 iOS 13适配01</a></p>

<p><a href="https://juejin.im/post/5d00af64e51d455d88219ee2#heading-8">掘金  适配 iOS13</a></p>

<p><a href="https://github.com/ChenYilong/iOS13AdaptationTips/issues?q=is%3Aissue+is%3Aopen+label%3Anote">iOS 13 更新tips</a></p>

<p><a href="https://medium.com/@hacknicity/view-controller-presentation-changes-in-ios-13-ac8c901ebc4e">View Controller Presentation Changes in iOS 13</a></p>

<h2 id="toc_0">1. Apple Login （2020年4月份）</h2>

<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdocs-assets.developer.apple.com%2Fpublished%2F80ac09c84c%2FAddingTheSignInWithAppleFlowToYourApp.zip">附上官方Demo：下载地址</a></p>

<h2 id="toc_1">2. Dark Mode</h2>

<h3 id="toc_2">2.1 暗黑模式 状态判断 &amp;&amp; 切换监听</h3>

<ul>
<li>判断模式状态</li>
</ul>

<pre><code class="language-text">if (UITraitCollection.currentTraitCollection.userInterfaceStyle == UIUserInterfaceStyleDark) {
    // 暗黑模式
}
else {
    // 正常模式
}
</code></pre>

<ul>
<li>监听模式切换</li>
</ul>

<pre><code class="language-text">// 注意:参数为变化前的traitCollection
- (void)traitCollectionDidChange:(UITraitCollection *)previousTraitCollection;

// 判断两个UITraitCollection对象是否不同
- (BOOL)hasDifferentColorAppearanceComparedToTraitCollection:(UITraitCollection *)traitCollection;
</code></pre>

<h3 id="toc_3">2.2 禁用暗黑模式</h3>

<ul>
<li><p>info.plist 内APP级别禁用暗黑模式</p>
<p>Key: <code>User Interface Style</code><br/>
value: <code>Light</code></p></li>
<li><p>widow级别的禁用暗黑模式</p>
<pre><code class="language-text">if (@available(iOS 13.0, *)) {
    [UIApplication sharedApplication].keyWindow.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;<br/>
}
</code></pre></li>
<li><p>ViewController级别禁用暗黑模式</p>
<p>想全局禁用需要在 baseVC内全局禁用</p>
<pre><code class="language-text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
- (UIUserInterfaceStyle)overrideUserInterfaceStyle{<br/>
    return UIUserInterfaceStyleLight;<br/>
}<br/>
#endif
</code></pre></li>
<li><p>view级别禁用暗黑模式</p>
<pre><code class="language-text">view.overrideUserInterfaceStyle = UIUserInterfaceStyleLight;
</code></pre></li>
</ul>

<h3 id="toc_4">2.3 适配暗黑模式颜色</h3>

<p><a href="https://www.jianshu.com/p/7925bd51d2d6">参考这里 ：iOS开发如何适配暗黑模式（Dark Mode）</a></p>

<pre><code class="language-text">+ (UIColor *)colorWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
- (UIColor *)initWithDynamicProvider:(UIColor * (^)(UITraitCollection *))dynamicProvider API_AVAILABLE(ios(13.0), tvos(13.0)) API_UNAVAILABLE(watchos);
</code></pre>

<pre><code class="language-text">[UIColor colorWithDynamicProvider:^UIColor * _Nonnull(UITraitCollection * _Nonnull trait) {
    if (trait.userInterfaceStyle == UIUserInterfaceStyleDark) {
        return UIColorRGB(0x000000);
    } else {
        return UIColorRGB(0xFFFFFF);
    }
 }];
</code></pre>

<h2 id="toc_5">3. present 半屏问题</h2>

<p><code>modalPresentationStyle</code>属性默认不是<code>UIModalPresentationFullScreen</code>了，需要根据需求手动设置。</p>

<pre><code class="language-text">LXNavigationViewController *nav = [[LXNavigationViewController alloc] initWithRootViewController:loginViewController];
nav.modalPresentationStyle = UIModalPresentationFullScreen;
[self presentViewController:nav animated:YES completion:nil];

</code></pre>

<ul>
<li><p>全局hook <code>presentViewController</code>方法</p>
<pre><code class="language-text">+ (void)hoookPresentFuc{
    [UIViewController aspect_hookSelector:@selector(presentViewController:animated:completion:) withOptions:AspectPositionBefore usingBlock:^(id&lt;AspectInfo&gt; aspectInfo){<br/>
        UIViewController *presentingVC =  (UIViewController *)aspectInfo.arguments.firstObject;<br/>
        presentingVC.modalPresentationStyle = UIModalPresentationFullScreen;<br/>
    } error:NULL];<br/>
}
</code></pre></li>
</ul>

<h2 id="toc_6">4. UITextField</h2>

<ul>
<li>支付输入密码有问题</li>
</ul>

<h3 id="toc_7">UITextField 的私有属性 _placeholderLabel 被禁止访问了</h3>

<ul>
<li><code>_placeholderLabel.textColor</code> 私有属性被禁止访问</li>
</ul>

<pre><code class="language-text">[self.textField setValue:self.placeholderColor forKeyPath:@&quot;_placeholderLabel.textColor&quot;];
</code></pre>

<p>崩溃信息：</p>

<pre><code class="language-text">&#39;Access to UITextField&#39;s _placeholderLabel ivar is prohibited. 
This is an application bug&#39; 
</code></pre>

<ul>
<li>解决方案</li>
</ul>

<pre><code class="language-text">UITextField有个attributedPlaceholder的属性，我们可以自定义这个富文本来达到我们需要的结果。

NSMutableAttributedString *placeholderString = [[NSMutableAttributedString alloc] initWithString:placeholder attributes:@{NSForegroundColorAttributeName : self.placeholderColor}];
_textField.attributedPlaceholder = placeholderString;
</code></pre>

<ul>
<li>项目适配代码</li>
</ul>

<pre><code class="language-text">if (@available(iOS 13.0, *)) {
    if (textField.attributedText.length &gt; 0) {
        color = textField.attributedText.color;
    }
}else{
    color = [textField valueForKeyPath:@&quot;_placeholderLabel.textColor&quot;];
}
</code></pre>

<p>iOS 13 通过 KVC 方式修改私有属性，有 Crash 风险，谨慎使用！并不是所有KVC都会Crash，要尝试！</p>

<h2 id="toc_8">5. UITextView 同上</h2>

<h2 id="toc_9">6. navigationBar 使用<code>UINavigation+SXFixSpace</code></h2>

<pre><code class="language-text">if ([NSStringFromClass(subview.class) containsString:@&quot;ContentView&quot;]) {
    // 结构调整后 在这里return掉
    if (@available(iOS 13.0, *)) {
        if ([NSStringFromClass(subview.class) containsString:@&quot;_UINavigationBarContentView&quot;]) {
            return;
        }
    }

    //可修正iOS11之后的偏移
    subview.layoutMargins = UIEdgeInsetsMake(0, space, 0, space);break;
}
</code></pre>

<p>同时，下面的属性也已经被禁止访问了：</p>

<ul>
<li><p><code>[barBgView valueForKey:@&quot;_shadowView&quot;];</code></p></li>
<li><p><code>[barBgView valueForKey:@&quot;_backgroundEffectView&quot;];</code></p></li>
</ul>

<h2 id="toc_10">7. statusBar</h2>

<ul>
<li><p><code>UIStatusBarStyleDefault</code>枚举值代表含义有变化</p>
<pre><code class="language-text">typedef NS_ENUM(NSInteger, UIStatusBarStyle) {
UIStatusBarStyleDefault                                  = 0, // 根据用户交互样式自动选择状态条样式<br/>
UIStatusBarStyleLightContent     API_AVAILABLE(ios(7.0)) = 1, // Light content, for use on dark backgrounds<br/>
UIStatusBarStyleDarkContent     API_AVAILABLE(ios(13.0)) = 3, // Dark content, for use on light backgrounds<br/>
UIStatusBarStyleBlackTranslucent NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 1,<br/>
UIStatusBarStyleBlackOpaque      NS_ENUM_DEPRECATED_IOS(2_0, 7_0, &quot;Use UIStatusBarStyleLightContent&quot;) = 2,<br/>
} API_UNAVAILABLE(tvos);
</code></pre></li>
<li><p>定制状态条的样式 使用apple 推荐的这个系统方法</p></li>
</ul>

<pre><code class="language-text">// ios 13.0 之后，这个方法已经失效了
// [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];

- (UIStatusBarStyle)preferredStatusBarStyle {
    if (@available(iOS 13.0, *)){
        return UIStatusBarStyleDarkContent;
    }
    return UIStatusBarStyleDefault;
}
</code></pre>

<p><strong>或者 ------&gt;&gt;：</strong></p>

<p><code>UIStatusBarStyleDefault</code> 替换为</p>

<pre><code class="language-text">(@available(iOS 13.0, *) ? UIStatusBarStyleDarkContent : UIStatusBarStyleDefault)
</code></pre>

<p>如果你还是使用的Xcode 10 为了走过编译器这一步，可以使用预编译命令，这么写：</p>

<pre><code class="language-text">#if defined(__IPHONE_13_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_13_0
    if (@available(iOS 13.0, *)) {
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDarkContent];
    }else{
        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
    }
#else
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
#endif
</code></pre>

<h2 id="toc_11">8. UITabbar</h2>

<ul>
<li>横线<br/>
UITabbar 层次发生改变，无法通过设置 shadowImage去掉上面的线；</li>
<li>红点<br/>
如果之前有通过TabBar上图片位置来设置红点位置，在iOS13上会发现显示位置都在最左边去了。遍历UITabBarButton的subViews发现只有在TabBar选中状态下才能取到UITabBarSwappableImageView，解决办法是修改为通过UITabBarButton的位置来设置红点的frame</li>
</ul>

<h2 id="toc_12">9. UISearchBar</h2>

<ul>
<li>UISearchBar的私有属性<code>UISearchBarBackground</code>，禁止访问和remove</li>
</ul>

<pre><code class="language-text">if ([subview isKindOfClass:NSClassFromString(@&quot;UISearchBarBackground&quot;)]) {
    if (@available(iOS 13.0, *)) {
        subview.backgroundColor = [UIColor lightGrayColor];
        // subview.layer.contents = nil;
    }else{
        [subview removeFromSuperview];
    }
}

</code></pre>

<h2 id="toc_13">10. 增加一直使用蓝牙的权限申请</h2>

<p><code>info.plist</code>文件下<br/>
Key: <code>NSBluetoothAlwaysUsageDescription</code><br/>
Value: <code>我们要一直使用您的蓝牙，具体做什么别问我</code></p>

<h2 id="toc_14">11. 推送 获取deviceToken</h2>

<pre><code class="language-text">#include &lt;arpa/inet.h&gt;
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    if (![deviceToken isKindOfClass:[NSData class]]) return;
    const unsigned *tokenBytes = [deviceToken bytes];
    NSString *hexToken = [NSString stringWithFormat:@&quot;%08x%08x%08x%08x%08x%08x%08x%08x&quot;,
                          ntohl(tokenBytes[0]), ntohl(tokenBytes[1]), ntohl(tokenBytes[2]),
                          ntohl(tokenBytes[3]), ntohl(tokenBytes[4]), ntohl(tokenBytes[5]),
                          ntohl(tokenBytes[6]), ntohl(tokenBytes[7])];
    NSLog(@&quot;deviceToken:%@&quot;,hexToken);
}
</code></pre>

<h2 id="toc_15">12. CNCopyCurrentNetworkInfo</h2>

<pre><code class="language-text"> An app that fails to meet any of the above requirements receives the following return value:

- An app linked against iOS 12 or earlier receives a dictionary with pseudo-values. In this case, the SSID is Wi-Fi (or WLAN in the China region), and the BSSID is 00:00:00:00:00:00.
- An app linked against iOS 13 or later receives NULL.
- 
</code></pre>

<p>iOS13 以后只有开启了 Access WiFi Information capability，才能获取到 SSID 和 BSSID</p>

<p><a href="https://link.juejin.im/?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fsystemconfiguration%2F1614126-cncopycurrentnetworkinfo%3Flanguage%3Docc">参考：CNCopyCurrentNetworkInfo</a></p>

<h2 id="toc_16">13. APP 启动速度优化 导致frame获取失败</h2>

<p>App启动过程中，部分View可能无法实时获取到frame。</p>

<h2 id="toc_17">14. WKWebView 中测量页面内容高度的方式变更</h2>

<p>iOS 13以前 document.body.scrollHeight iOS 13中 document.documentElement.scrollHeight 两者相差55 应该是浏览器定义高度变了</p>

<h2 id="toc_18">15. fishhook 导致的Crash</h2>

<p><a href="https://github.com/facebook/fishhook/issues">github fishhook</a></p>

<h2 id="toc_19">16. MPMoviePlayerController 已经被弃用</h2>

<pre><code class="language-text">&#39;MPMoviePlayerController is no longer available. Use AVPlayerViewController in AVKit.&#39; 
</code></pre>

<h2 id="toc_20">17. LaunchImage 即将消失</h2>

<p>从 iOS 8 的时候，苹果就引入了 LaunchScreen，我们可以设置 LaunchScreen来作为启动页。当然，现在你还可以使用LaunchImage来设置启动图。不过使用LaunchImage的话，要求我们必须提供各种屏幕尺寸的启动图，来适配各种设备，随着苹果设备尺寸越来越多，这种方式显然不够 Flexible。而使用 LaunchScreen的话，情况会变的很简单， LaunchScreen是支持AutoLayout+SizeClass的，所以适配各种屏幕都不在话下。<br/>
注意啦⚠️，从2020年4月开始，所有使⽤ iOS13 SDK 的 App 将必须提供 LaunchScreen，LaunchImage即将退出历史舞台。</p>

<h2 id="toc_21">18. window层级变化</h2>

<p>遍历视图获取 keywindow 的方式会失效。<br/>
新增了 screenWindow  自定义视图和 keywindow之间新增iOS 13系统的特有图层。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/9/9</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15658640474935.html">
                
                  <h1>Viewcontroller顶部白条</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">顶部白条 20pt左右</h2>

<pre><code class="language-text">self.automaticallyAdjustsScrollViewInsets = NO;
self.edgesForExtendedLayout = UIRectEdgeNone;
if (@available(iOS 11.0, *)) {
    UIScrollView.appearance.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
}
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/8/15</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15640609790414.html">
                
                  <h1>UIVisualEffectView iOS8以后的毛玻璃效果实现</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">先看一下简单的使用</h2>

<pre><code class="language-text">
// 创建一个特效对象
UIBlurEffect *blurEffect = [UIBlurEffect effectWithStyle:UIBlurEffectStyleLight];

// 创建一个毛玻璃视图
UIVisualEffectView *blurView = [[UIVisualEffectView alloc] initWithEffect:blurEffect];
blurView.clipsToBounds = YES;
blurView.layer.borderColor = [[UIColor blackColor] colorWithAlphaComponent:0.4f].CGColor;
blurView.layer.borderWidth = 1.0;
blurView.layer.cornerRadius = 6.0;

// label
UILabel *label = [[UILabel alloc] init];
label.textColor = [UIColor colorWithWhite:0.4f alpha:1.0f];

// add the label to effect view
[blurView.contentView addSubview:label];
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/7/25</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15585285635788.html">
                
                  <h1>Charlse使用进阶</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">HTTPS数据抓包</h2>

<h3 id="toc_1">设置代理 + 端口号</h3>

<blockquote>
<p>这一步的目的就是将安装了charlse的电脑作为网络请求的代理服务器<br/>
1、让电脑代替手机去向服务器发送请求<br/>
2、让电脑代替server服务器向手机返回指定的数据</p>
</blockquote>

<ul>
<li><strong>查看本地作为代理电脑的IP地址 以及 开放端口号</strong></li>
</ul>

<p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g3adjwhexsj30k80ceqdy.jpg" alt="查看端口号"/></p>

<p>然后就会弹出信息框<br/>
<img src="http://ww1.sinaimg.cn/large/006tNc79ly1g3adp0wu3qj30qw0g8aay.jpg" alt="IP信息框"/></p>

<ul>
<li><p><strong>更改端口号【有两种入口】</strong></p>
<ul>
<li><p>更改端口号方式1<br/>
<img src="http://ww4.sinaimg.cn/large/006tNc79ly1g3admaiajgj30ug0jqqjo.jpg" alt="更改端口号方式1"/></p></li>
<li><p>更改端口号方式2<br/>
<img src="http://ww3.sinaimg.cn/large/006tNc79ly1g3adna45g8j311609ydll.jpg" alt="更改端口号方式2"/></p></li>
</ul></li>
</ul>

<h3 id="toc_2">手机连接代理</h3>

<p>设置 -- &gt; 无线网络 --&gt; 连接并点击与代理电脑同一局域网的网络 --&gt; 配置代理  --&gt; 手动<br/>
<strong>设置服务器和端口</strong><br/>
【不需要开启鉴定】<br/>
存储一下！！！！！！！！😂这一步很关键哦</p>

<p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g3adv4cz00j30om17uare.jpg" alt="手机端设置代理"/></p>

<h3 id="toc_3">代理电脑允许手机端连接</h3>

<p>操作完上一步，这时候代理电脑charlse会弹出一个是否允许连接代理的alert 点击 <strong>allow</strong> 【这一步也很关键】</p>

<hr/>

<p>到此为止你就可以抓取手机上发出的 所有 请求了。<br/>
但是你会发现，为什么所有的https请求都是加密的信息  都是乱码，客观莫急，请往下看！👀</p>

<hr/>

<h3 id="toc_4">安装证书 + 信任证书</h3>

<p>charlse的 help --&gt; SSL Proxying --&gt; Install * Mobile Device or Remote Vrowser<br/>
<strong>手机在连接代理的状态下</strong><br/>
Safari浏览器下，地址栏输入 <code>chls.pro/ssl</code></p>

<ul>
<li>安装证书<br/>
设置 --&gt; 通用 --&gt; 描述文件<br/>
点击</li>
<li>信任证书<br/>
设置 --&gt; 通用 --&gt; 证书信任设置</li>
</ul>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3ae23oq3fj31d80j0nol.jpg" alt="charlse证书信息"/></p>

<p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g3ae3etebyj317a08y40b.jpg" alt="局域网证书下载地址"/></p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3aehcl6zfj30ou17r1fc.jpg" alt=""/></p>

<h3 id="toc_5">配置抓包域名</h3>

<p>Proxy --&gt; SSL Proxying Setting --&gt; Enable SSL Proxying --&gt; add --&gt; OK👌</p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3aeoo5tvxj30hm0k07jh.jpg" alt=""/></p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3aepurqtbj30ww0ok0vp.jpg" alt=""/></p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3aeqmhdmsj30og0agabf.jpg" alt=""/></p>

<h2 id="toc_6"></h2>

<p>这个时候你就可以尽情的享受抓取别人数据的爽快了~就像是有了透视眼😂<br/>
如果还是抓不到数据 ，那就重启下Charlse 。毕竟重启能解决大多数棘手的问题。<br/>
如果还是抓不到你想要抓取的数据...那就是别人是秘闻传输的信息加密手段比较强悍了</p>

<h2 id="toc_7"></h2>

<h2 id="toc_8">配置本地假数据</h2>

<p>当Server接口跟不上，你是否还在为创建各式各样的假数据而烦恼？你的代码里面是否会有很多Test方法？往下看，你会感谢我的。</p>

<p><img src="http://ww4.sinaimg.cn/large/006tNc79ly1g3af1lo4e8j30d40pstoc.jpg" alt=""/></p>

<p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g3af3mrgjrj30u00io0vm.jpg" alt=""/></p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g3afabqmpkj30q80ngtb3.jpg" alt=""/></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/5/22</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15198022156700.html">
                
                  <h1>iOS 面试题总结</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">基础篇</h2>

<h3 id="toc_1">内存管理 ：assign copy strong weak...</h3>

<ul>
<li>简述OC中内存管理机制,与retain配对使用的方法是dealloc还是release，为什么？</li>
</ul>

<blockquote>
<p>管理机制：<br/>
  使用了一种叫做 <strong>引用计数</strong> 的机制来管理内存中的对象。OC中每个对象都对应着他们自己的引用计数，引用计数可以理解为一个整数计数器，当使用alloc方法创建对象的时候，持有计数会自动设置为1。当你向一个对象发送retain消息 时，持有计数数值会增加1。相反，当你像一个对象发送release消息时，持有计数数值会减小1。当对象的持有计数变为0的时候，对象会释放自己所占用的内存</p>
</blockquote>

<ul>
<li><p>修饰词的作用</p>
<ul>
<li>retain(引用计数加1)-&gt;release（引用计数减1）</li>
<li>alloc（申请内存空间）-&gt;dealloc(释放内存空间)</li>
<li>readwrite: 表示既有getter，也有setter   (默认)</li>
<li>readonly: 表示只有getter，没有setter</li>
<li>nonatomic:不考虑线程安全</li>
<li>atomic:线程操作安全   （默认）</li>
<li>retain: release旧的对象，将旧对象的值赋予输入对象，再提高输入对象的索引计数为1</li>
<li>assign: 简单赋值，不更改索引计数    （默认）</li>
<li>copy: 其实是建立了一个相同的对象,地址不同（retain：指针拷贝  copy：内容拷贝）</li>
<li>strong:（ARC下的）和（MRC）retain一样    （默认）</li>
<li>weak:（ARC下的）和（MRC）assign一样， weak当指向的内存释放掉后自动nil化，防止野指针</li>
<li>unsafe_unretained 声明一个弱引用，但是不会自动nil化，也就是说，如果所指向的内存区域被释放了，这个指针就是一个野指针了。 autoreleasing 用来修饰一个函数的参数，这个参数会在函数返回的时候被自动释放。<br/>
### 类变量的@protected ,@private,@public,@package，声明各有什么含义？</li>
</ul></li>
</ul>

<h3 id="toc_2">有趣的指针</h3>

<p>用变量a给出下面的定义<a href="http://blog.csdn.net/ropenyuan/article/details/6678080">原文链接</a><br/>
a) 一个整型数<br/>
b) 一个指向整型数的指针<br/>
c) 一个指向指针的的指针，它指向的指针是指向一个整型数<br/>
d) 一个有10个整型数的数组<br/>
e) 一个有10个指针的数组，该指针是指向一个整型数的<br/>
f) 一个指向有10个整型数数组的指针<br/>
g) 一个指向函数的指针，该函数有一个整型参数并返回一个整型数<br/>
h) 一个有10个指针的数组，该指针指向一个函数，该函数有一个整型参数并返回一个整型数</p>

<pre><code class="language-text">a) int a; // An integer 

b) int *a; // A pointer to an integer

c) int **a; // A pointer to a pointer to an integer

d) int a[10]; // An array of 10 integers

e) int *a[10]; // An array of 10 pointers to integers

f) int (*a)[10]; // A pointer to an array of 10 integers

g) int (*a)(int); // A pointer to a function a that takes an integer argument and returns an integer

h) int (*a[10])(int); // An array of 10 pointers to functions that take an integer argument and return an integer
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/2/28</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='ios.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="ios.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="ios_2.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fmpk9088gsj30sg0sgn33.jpg" /></div>
            
                <h1>kaelinda</h1>
                <div class="site-des">倘若我心中的山水，你眼中能看到，我便一步一莲花祈祷</div>
                <div class="social">








<a target="_blank" class="twitter" target="_blank" href="https://twitter.com/KaelLVLinda" title="Twitter">Twitter</a>
<a target="_blank" class="github" target="_blank" href="https://github.com/kaelinda" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:zhouzuosong_kael@163.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="reactnative.html"><strong>React-Native</strong></a>
        
            <a href="ios.html"><strong>iOS</strong></a>
        
            <a href="app.html"><strong>MacAPP</strong></a>
        
            <a href="swift.html"><strong>Swift</strong></a>
        
            <a href="js.html"><strong>JavaScript</strong></a>
        
            <a href="vue.html"><strong>Vue</strong></a>
        
            <a href="shell.html"><strong>shell</strong></a>
        
            <a href="%E7%BD%91%E7%BB%9C.html"><strong>网络</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15820796939326.html">事件传递 && 响应链</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15813277247140.html">搭建SSR</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15821643064568.html">编译 && 链接</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15808664810026.html">RunLoop攻坚</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15783926794655.html">ios 之 自动打包 一键打包脚本 【bash优化版本】</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
